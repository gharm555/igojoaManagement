<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{layout/fragments :: documentHeader}">
</head>
<body>
<div class="container p-4 bg-white rounded shadow-sm" th:fragment="reviewContent">
	<div class="row">
		<div class="col-md-3 border-end">
			<div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
				<a class="nav-link active" id="v-pills-report-tab" data-bs-toggle="pill" href="#v-pills-report" role="tab" aria-controls="v-pills-report" aria-selected="true">신고 리뷰 목록</a>
				<a class="nav-link" id="v-pills-inappropriate-tab" data-bs-toggle="pill" href="#v-pills-inappropriate" role="tab" aria-controls="v-pills-inappropriate" aria-selected="false">부적절한 리뷰 목록</a>
			</div>
		</div>
		<div class="col-md-9">
			<div class="tab-content" id="v-pills-tabContent">
				<div class="tab-pane fade show active" id="v-pills-report" role="tabpanel" aria-labelledby="v-pills-report-tab">
					<ul class="list-group list-group-flush" id="report-list">
						<li th:each="review : ${reportReviews}" class="list-group-item d-flex justify-content-between align-items-center">
							<div>
								<strong class="reportedId" th:text="${review.reporterId != null ? review.reporterId : 'Unknown User'}"></strong>
								<span> (at </span><span th:text="${review.reportTime}"></span>):
								<span th:text="${review.reportReason}"></span>
								<br>
								<strong th:text="${review.reportedNickname != null ? review.reportedNickname : 'Unknown Place'}"></strong><span>: </span>
								<span th:if="${#strings.length(review.review) > 25}" th:text="${#strings.substring(review.review, 0, 25) + '...'}"></span>
								<span th:if="${#strings.length(review.review) <= 25}" th:text="${review.review}"></span>
								<br>
								<small>장소: <span class="r-placeName" th:text="${review.placeName != null ? review.placeName : '알 수 없음'}"></span></small>
							</div>
							<div>
								<!-- 신고 취소 버튼 -->
								<button class="btn btn-warning btn-sm report-cancel"
										onclick="cancelReport(this)">신고 취소</button>
								<!-- 삭제 버튼 -->
								<button class="btn btn-danger btn-sm report-delete"
										onclick="deleteReview(this)">삭제</button>
							</div>
						</li>
					</ul>
				</div>
				<!-- 전체 리뷰 목록 -->
				<div class="tab-pane fade" id="v-pills-inappropriate" role="tabpanel" aria-labelledby="v-pills-inappropriate-tab">
					<ul class="list-group list-group-flush" id="inappropriate-list">
						<li th:each="review : ${inappropriateReviews}" class="list-group-item d-flex justify-content-between align-items-center">
							<div>
								<strong class="userId" th:text="${review.reviewId.userId != null ? review.reviewId.userId : 'Unknown User'}"></strong>
								:
								<span th:text="${review.reviewContent}"></span>
								<br>
								<small>장소: <span class="i-placeName" th:text="${review.reviewId.placeName != null ? review.reviewId.placeName : '알 수 없음'}"></span></small>
							</div>
							<div>
								<!-- 삭제 버튼 -->
								<button class="btn btn-danger btn-sm inappropriate-delete"
										onclick="deleteReview(this)">삭제</button>
							</div>
						</li>
					</ul>
				</div>
			</div>
			<nav
				aria-label="Post List Page Navigation"
				th:if="${totalPages > 0}"
				th:fragment="pagination"
				id="pagination"
			>
				<ul class="mt-5 pagination justify-content-center">
					<!-- 첫 페이지로 이동 -->
					<li class="page-item" th:classappend="${currentPage == 1} ? disabled">
						<a
							class="page-link"
							th:href="@{/(page=1)}"
							th:attr="data-page=1"
							aria-label="First"
						>
							<span aria-hidden="true">&laquo;&laquo;</span>
						</a>
					</li>

					<!-- 이전 그룹으로 이동 -->
					<li class="page-item" th:classappend="${startPage == 1} ? disabled">
						<a
							class="page-link"
							th:href="@{/(page=${startPage - 5})}"
							th:attr="data-page=${startPage - 5}"
							aria-label="Previous Group"
						>
							<span aria-hidden="true">&laquo;</span>
						</a>
					</li>

					<!-- 페이지 번호 -->
					<li
						class="page-item"
						th:each="pageNum : ${#numbers.sequence(startPage, endPage)}"
						th:classappend="${pageNum == currentPage} ? active"
					>
						<a
							class="page-link"
							th:href="@{/(page=${pageNum})}"
							th:text="${pageNum}"
							th:attr="data-page=${pageNum}"
						></a>
					</li>

					<!-- 다음 그룹으로 이동 -->
					<li
						class="page-item"
						th:classappend="${endPage == totalPages} ? disabled"
					>
						<a
							class="page-link"
							th:href="@{/(page=${endPage+1})}"
							th:attr="data-page=${endPage+1}"
							aria-label="Next Group"
						>
							<span aria-hidden="true">&raquo;</span>
						</a>
					</li>

					<!-- 마지막 페이지로 이동 -->
					<li
						class="page-item"
						th:classappend="${currentPage == totalPages} ? disabled"
					>
						<a
							class="page-link"
							th:href="@{/(page=${totalPages})}"
							th:attr="data-page=${totalPages}"
							aria-label="Last"
						>
							<span aria-hidden="true">&raquo;&raquo;</span>
						</a>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>

<script th:replace="~{layout/fragments :: bootstrapScript}"></script>
</body>
</html>
